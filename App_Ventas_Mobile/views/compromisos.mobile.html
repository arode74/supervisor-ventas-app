<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Compromisos ‚Äî M√≥vil</title>

  <!-- MISMO STACK DE ESTILOS QUE VENTAS -->
  <link rel="stylesheet" href="/styles/mobile-afp.css"/>
  <link rel="stylesheet" href="/styles/mobile.css"/>

  <!-- ENV primero -->
  <script src="/env.js"></script>
  <script>
    // Compatibilidad con env antiguos (igual que Ventas)
    try {
      if (typeof window.SUPABASE_URL === "undefined" && typeof SUPABASE_URL !== "undefined") window.SUPABASE_URL = SUPABASE_URL;
      if (typeof window.SUPABASE_ANON_KEY === "undefined" && typeof SUPABASE_ANON_KEY !== "undefined") window.SUPABASE_ANON_KEY = SUPABASE_ANON_KEY;
    } catch (e) {}
  </script>
</head>

<body>
  <div class="ventas-screen">

    <!-- TOPBAR: IGUAL A VENTAS -->
    <header class="m-topbar">
      <img class="m-topbar__logo" src="/assets/logo_app_ventas.png" alt="APP Ventas"/>
      <div class="m-topbar__title">Compromisos</div>
      <button class="m-topbar__logout" id="btn-logout" type="button" aria-label="Cerrar sesi√≥n" title="Cerrar sesi√≥n">‚èª</button>
    </header>

    <!-- TOOLBAR: IGUAL A VENTAS -->
    <div class="ventas-top">
      <div class="m-toolbar">
        <div class="m-field">
          <div class="m-field__icon">üìÖ</div>
          <input class="m-input" id="dt-dia" type="date"/>
        </div>

        <div class="m-toolbar__right">
          <button class="m-backbtn" type="button" id="btn-volver">‚Äπ Volver</button>
        </div>
      </div>

      <div class="m-field m-gap-10">
        <div class="m-field__icon">üîé</div>
        <input class="m-input" id="txt-buscar" type="search" placeholder="Buscar vendedor‚Ä¶" autocomplete="off"/>
      </div>
    </div>

    <!-- SOLO ESTE BLOQUE SCROLLEA: IGUAL A VENTAS -->
    <main class="ventas-scroll">
      <section class="ventas-layout">
        <aside id="abcBar" class="ventas-abc" aria-label="√çndice alfab√©tico"></aside>

        <section class="m-card ventas-lista" aria-label="Lista de vendedores">
          <div class="m-list" id="lista-vendedores"></div>
        </section>
      </section>
    </main>

    <!-- OVERLAY / SHEET (IDs INTACTOS para compromisos.mobile.js) -->
    <div id="overlay" class="mobile-overlay" style="display:none;">
      <div id="sheet" class="mobile-sheet">

        <div class="mobile-sheet-header">
          <h2 id="modalSub"></h2>
          <button id="btnCancelar" class="mobile-btn" type="button">Cerrar</button>
        </div>

        <div class="mobile-tabs">
          <button id="tabMensual" class="mobile-tab active" type="button">Mensual</button>
          <button id="tabSemanal" class="mobile-tab" type="button">Semanal</button>
          <button id="tabDiario" class="mobile-tab" type="button">Diario</button>
        </div>

        <div id="formMensual" class="mobile-form">
          <div id="tblMensual" class="cmp-table"></div>
        </div>

        <div id="formSemanal" class="mobile-form" style="display:none;">
          <div id="tblSemanal" class="cmp-table"></div>
        </div>

        <div id="formDiario" class="mobile-form" style="display:none;">
          <div class="cmp-daynav">
            <button id="diaPrev" type="button">‚óÄ</button>
            <span id="diaLabel"></span>
            <button id="diaNext" type="button">‚ñ∂</button>
          </div>

          <div id="lblSemana" class="mobile-mini"></div>
          <div id="diarioLista" class="cmp-diario"></div>
          <button id="diarioAdd" class="m-fab" type="button">+</button>
        </div>

      </div>
    </div>

    <div id="diarioPicker" class="cmp-picker" style="display:none;">
      <div class="cmp-picker__card">
        <select id="diarioTipoSelect" class="mobile-input"></select>
        <div class="cmp-picker__actions">
          <button id="diarioTipoCancel" class="mobile-btn" type="button">Cancelar</button>
          <button id="diarioTipoOk" class="mobile-btn" type="button">OK</button>
        </div>
      </div>
    </div>

    <div id="toast" class="mobile-toast"></div>

    <!-- SCRIPTS: MISMO ORDEN QUE VENTAS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/config.js"></script>
    <script src="/scripts/mobile_shared.js" defer></script>
    <script src="/scripts/compromisos.mobile.js" defer></script>

  </div>
</body>
</html>
